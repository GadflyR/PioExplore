<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <title>Student Origins</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
    <link rel="shortcut icon" href="../images/explore-icon.png">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <header class="hero">
        <div class="overlay"></div>
        <div class="hero-content">
            <h1>Our Students</h1>
            <p>Explore where our diverse student body comes from.</p>
            <p>Each circle on the map represents the number of students from that country or region.</p>
        </div>
    </header>

    <section class="introduction">
        <h2>Map of Nationalities</h2>
        <p>Click on a circle to learn more.</p>
    </section>

    <div id="map"></div>

    <footer>
        <p>© WGDC 2024 — Discover Our Culture.</p>
    </footer>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
    <script>
        // Initialize the map with maxBounds to show only one world
        var map = L.map('map', {
            worldCopyJump: false,
            maxBounds: [[-85, -180],[85, 180]], // approximate world bounds
            maxBoundsViscosity: 1.0 // 'sticky' max bounds
        }).setView([20, 0], 2); // You can adjust the initial view if desired

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
            noWrap: true // Prevent the map from repeating world horizontally
        }).addTo(map);

        var data = [
            { country: "Türkiye", students: 60, lat: 39.9334, lng: 32.8597 },
            { country: "Kurdistan", students: 20, lat: 36.1911, lng: 44.0095 },
            { country: "Hongkong", students: 2, lat: 22.3193, lng: 114.1694 },
            { country: "Guangdong (Canton)", students: 3, lat: 23.3790, lng: 113.7633 },
            { country: "Beijing", students: 4, lat: 39.9042, lng: 116.4074 },
            { country: "Tianjin", students: 1, lat: 39, lng: 117.4074 },
            { country: "Henan", students: 2, lat: 34.7986, lng: 113.6654 },
            { country: "Shaanxi", students: 2, lat: 34.3416, lng: 108.9398 },
            { country: "Shandong", students: 2, lat: 36.6683, lng: 117.0209 },
            { country: "Canada", students: 2, lat: 56.1304, lng: -106.3468 },
            { country: "Portugal", students: 1, lat: 39.3999, lng: -8.2245 },
            { country: "Montenegro", students: 1, lat: 42.4304, lng: 19.2594 },
            { country: "Bosnia", students: 1, lat: 43.8563, lng: 18.4131 },
            { country: "South Korea", students: 2, lat: 35.9078, lng: 127.7669 },
            { country: "Mongolia", students: 2, lat: 46.8625, lng: 103.8467 },
            { country: "Kenya", students: 1, lat: -0.0236, lng: 37.9062 },
            { country: "Pakistan", students: 3, lat: 30.3753, lng: 69.3451 },
            { country: "Palestine", students: 2, lat: 31.9522, lng: 35.2332 },
            { country: "Ukraine", students: 1, lat: 48.3794, lng: 31.1656 },
            { country: "UK", students: 1, lat: 55.3781, lng: -3.4360 },
            { country: "Brazil", students: 1, lat: -14.2350, lng: -51.9253 },
            { country: "Egypt", students: 1, lat: 26.8206, lng: 30.8025 },
            { country: "Sinkiang (Uyghuristan)", students: 2, lat: 43.7922, lng: 87.6177 },
            { country: "Taiwan", students: 2, lat: 23.6978, lng: 120.9605 },
            { country: "Bangladesh", students: 1, lat: 23.6850, lng: 90.3563 },
            { country: "Russia", students: 1, lat: 61.5240, lng: 105.3188 },
            { country: "Chechnya", students: 1, lat: 43.3999, lng: 45.7150 },
            { country: "Kazakhstan", students: 2, lat: 48.0196, lng: 66.9237 },
            { country: "Nigeria", students: 2, lat: 9.0820, lng: 8.6753 },
            { country: "Azerbaijan", students: 1, lat: 40.1431, lng: 47.5769 },
            { country: "India", students: 3, lat: 20.5937, lng: 78.9629 },
            { country: "Greece", students: 1, lat: 39.0742, lng: 21.8243 },
            { country: "Georgia", students: 1, lat: 42.3154, lng: 43.3569 }
        ];

        // Define a style for the circles
        function circleStyle(students) {
            var computedRadius = (students ** 0.8 + 13) * 10000;
            return {
                color: '#ff914d',
                fillColor: '#ff914d',
                fillOpacity: 0.8,
                weight: 2,
                radius: computedRadius
            };
        }

        // Add circles for each country/region
        data.forEach(function(entry) {
            L.circle([entry.lat, entry.lng], circleStyle(entry.students))
                .bindPopup(`<strong>${entry.country}</strong>`)
                .addTo(map);
        });

        var schoolLat = 40.9257;
        var schoolLng = -74.2765;

        L.marker([schoolLat, schoolLng])
            .bindPopup("<strong>Pioneer Academy</strong>")
            .addTo(map);
    </script>
</body>
</html>
